import{R as m}from"./index.eddda93d.js";import{_ as C}from"./UserBrief.494b4d44.js";import{d as x,e as q,a4 as B,aa as k,o as A,f as R,g as l,h as u,j as e,ap as Y,aq as f,ar as c,as as o,ae as i,ai as F,ah as _,a1 as b,l as w,ak as E,aj as P,v as N}from"./vendor.b2c28a85.js";const U={style:{display:"flex","justify-content":"flex-end"}},$=N(" \u66F4\u65B0\u4E2A\u4EBA\u4FE1\u606F "),j={style:{display:"flex","justify-content":"flex-end"}},T=N(" \u4FEE\u6539\u5BC6\u7801 "),S=x({props:{user:null,colleges:null,updatingInfo:{type:Boolean},updatingPassword:{type:Boolean}},emits:["updateInfo","updatePassword"],setup(d,{emit:g}){const s=d,h=q(()=>s.colleges.map(p=>({value:p.id,label:p.name}))),D=[{value:m.Student,label:"\u5B66\u751F"},{value:m.Teacher,label:"\u6559\u5E08"},{value:m.Admin,label:"\u7BA1\u7406\u5458"}],t=B({username:s.user.username,realName:s.user.realName,collegeId:s.user.college.id,role:s.user.role,entranceYear:s.user.entranceYear||2019});k(()=>s.user,()=>{t.value={username:s.user.username,realName:s.user.realName,collegeId:s.user.college.id,role:s.user.role,entranceYear:s.user.entranceYear||2019}});const n=B({password:"",passwordRepeat:""}),v={id:{required:!0,pattern:/^.{9,16}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5B66\u53F7",trigger:"input"},username:{required:!0,pattern:/^.{5,20}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u7528\u6237\u540D",trigger:"input"},realName:{required:!0,pattern:/^.{1,15}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u59D3\u540D",trigger:"input"},password:{required:!0,pattern:/^.{6,}$/,message:"\u8BF7\u8F93\u5165\u5BC6\u7801, \u81F3\u5C116\u4F4D",trigger:"input"},passwordRepeat:[{required:!0,message:"\u8BF7\u786E\u8BA4\u5BC6\u7801",trigger:["input","blur"]},{message:"\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4",trigger:"input",validator(p,a,r){return n.value.password.startsWith(a)&&n.value.password.length>=a.length}},{message:"\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u6837",trigger:["blur","password-input"],validator(p,a,r){return n.value.password===a}}],collegeId:{required:!0,message:"\u8BF7\u9009\u62E9\u5B66\u9662",trigger:"input",pattern:/^.{1,}$/},entranceYear:{required:!0,message:"\u8BF7\u8F93\u5165\u5165\u5B66\u5E74\u4EFD",trigger:"input",pattern:/^\d{4}$/}};function I(){g("updateInfo",t.value)}function y(){g("updatePassword",n.value.password)}return(p,a)=>(A(),R(e(P),{cols:10,"x-gap":12},{default:l(()=>[u(e(E),{span:7},{default:l(()=>[u(e(Y),{type:"line",animated:""},{default:l(()=>[u(e(f),{name:"info",tab:"\u4E2A\u4EBA\u4FE1\u606F"},{default:l(()=>[u(e(c),{model:t.value,rules:v,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",disabled:d.updatingInfo},{default:l(()=>[u(e(o),{label:"\u7528\u6237\u540D:",path:"username"},{default:l(()=>[u(e(i),{value:t.value.username,"onUpdate:value":a[0]||(a[0]=r=>t.value.username=r),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",clearable:""},null,8,["value"])]),_:1}),u(e(o),{label:"\u59D3\u540D:",path:"realName"},{default:l(()=>[u(e(i),{value:t.value.realName,"onUpdate:value":a[1]||(a[1]=r=>t.value.realName=r),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",clearable:""},null,8,["value"])]),_:1}),u(e(o),{label:"\u5B66\u9662: ",path:"collegeId"},{default:l(()=>[u(e(F),{value:t.value.collegeId,"onUpdate:value":a[2]||(a[2]=r=>t.value.collegeId=r),placeholder:"\u8BF7\u9009\u62E9\u5B66\u9662",options:e(h)},null,8,["value","options"])]),_:1}),u(e(o),{label:"\u89D2\u8272: "},{default:l(()=>[u(e(F),{value:t.value.role,"onUpdate:value":a[3]||(a[3]=r=>t.value.role=r),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",options:D},null,8,["value"])]),_:1}),u(e(o),{label:"\u5165\u5B66\u5E74\u4EFD:",path:"entranceYear"},{default:l(()=>[u(e(_),{value:t.value.entranceYear,"onUpdate:value":a[4]||(a[4]=r=>t.value.entranceYear=r),min:1980,max:new Date().getFullYear()+10,placeholder:"\u8BF7\u8F93\u5165\u5165\u5B66\u5E74\u4EFD",clearable:""},null,8,["value","max"])]),_:1}),b("div",U,[u(e(w),{round:"",type:"primary",ghost:"",onClick:I,loading:d.updatingInfo},{default:l(()=>[$]),_:1},8,["loading"])])]),_:1},8,["model","disabled"])]),_:1}),u(e(f),{name:"password",tab:"\u66F4\u65B0\u5BC6\u7801"},{default:l(()=>[u(e(c),{model:n.value,rules:v,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",disabled:d.updatingPassword},{default:l(()=>[u(e(o),{label:"\u5BC6\u7801:",path:"password"},{default:l(()=>[u(e(i),{value:n.value.password,"onUpdate:value":a[5]||(a[5]=r=>n.value.password=r),type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["value"])]),_:1}),u(e(o),{label:"\u786E\u8BA4\u5BC6\u7801:",path:"passwordRepeat"},{default:l(()=>[u(e(i),{value:n.value.passwordRepeat,"onUpdate:value":a[6]||(a[6]=r=>n.value.passwordRepeat=r),type:"password",placeholder:"\u8BF7\u518D\u6B21\u786E\u8BA4\u5BC6\u7801"},null,8,["value"])]),_:1}),b("div",j,[u(e(w),{round:"",type:"primary",ghost:"",disabled:!n.value.password||n.value.password!==n.value.passwordRepeat,loading:d.updatingPassword,onClick:y},{default:l(()=>[T]),_:1},8,["disabled","loading"])])]),_:1},8,["model","disabled"])]),_:1})]),_:1})]),_:1}),u(e(E),{span:3},{default:l(()=>[u(C,{user:d.user},null,8,["user"])]),_:1})]),_:1}))}});export{S as _};
